"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5928],{5928:(J,h,l)=>{l.r(h),l.d(h,{VocabularyModule:()=>S});var o=l(5362),d=l(9808),u=l(4182),v=l(9705),c=l(655),b=l(4090);class f{constructor(s,i){this.lastPracticed=0,this.wasCorrect=!1,this.practicedCount=0,this.correctCount=0,this.practiceLevel=b.u.NeverKnownOrPracticed,this.score=0,this.foreignMeaning=s,this.nativeMeanings=i}}var e=l(9863),m=l(1756);function p(n,s){if(1&n){const i=e.EpF();e.TgZ(0,"ion-item",12),e.TgZ(1,"ion-input",7),e.NdJ("ngModelChange",function(a){return e.CHM(i).$implicit.value=a}),e.qZA(),e.qZA()}if(2&n){const i=s.$implicit;e.MGl("id","nativeMeaning",s.index,""),e.xp6(1),e.Q6J("ngModel",i.value)}}let Z=(()=>{class n{constructor(i,t){this.vocabularyService=i,this.modalController=t,this.isEdit=!1,this.foreignMeaning="",this.nativeMeanings=[{value:""}]}ngOnInit(){this.vocable&&(this.isEdit=!0,this.foreignMeaning=this.vocable.foreignMeaning,this.nativeMeanings=this.vocable.nativeMeanings.map(i=>({value:i})))}addNativeMeaning(){return(0,c.mG)(this,void 0,void 0,function*(){this.nativeMeanings.push({value:""});let i=null,t=0;for(;null==i&&t<10;)yield new Promise(a=>setTimeout(a,10)),i=document.getElementById("nativeMeaning"+(this.nativeMeanings.length-1)),t++;null==i||i.focus()})}cancel(){this.modalController.dismiss()}save(){let i=this.foreignMeaning.trim(),t=this.nativeMeanings.map(a=>a.value.trim()).filter(a=>""!==a);""!==i&&t.length>=1&&(this.vocable?(this.vocable.foreignMeaning=i,this.vocable.nativeMeanings=t,this.vocabularyService.update(this.vocable),this.modalController.dismiss()):(this.vocabularyService.add(new f(i,t)),this.modalController.dismiss()))}}return n.\u0275fac=function(i){return new(i||n)(e.Y36(m.c),e.Y36(o.IN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-vocabulary"]],decls:27,vars:4,consts:[["translucent",""],[2,"text-align","center"],["slot","start"],[3,"click"],["slot","end"],["position","stacked"],["id","foreignMeaning",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[3,"id",4,"ngFor","ngForOf"],["lines","none"],["slot","end",2,"width","32px","height","32px",3,"click"],["icon","Add"],[3,"id"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header",0),e.TgZ(1,"ion-toolbar"),e.TgZ(2,"ion-title",1),e._uU(3),e.qZA(),e.TgZ(4,"ion-buttons",2),e.TgZ(5,"ion-button",3),e.NdJ("click",function(){return t.cancel()}),e._uU(6,"Cancel"),e.qZA(),e.qZA(),e.TgZ(7,"ion-buttons",4),e.TgZ(8,"ion-button",3),e.NdJ("click",function(){return t.save()}),e._uU(9,"Save"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"ion-content"),e._UZ(11,"br"),e.TgZ(12,"ion-list"),e.TgZ(13,"ion-item"),e.TgZ(14,"ion-label",5),e._uU(15,"Foreign meaning"),e.qZA(),e.TgZ(16,"ion-input",6),e.NdJ("ngModelChange",function(r){return t.foreignMeaning=r}),e.qZA(),e.qZA(),e._UZ(17,"br"),e.TgZ(18,"ion-item"),e.TgZ(19,"ion-label",5),e._uU(20,"Native meanings"),e.qZA(),e.TgZ(21,"ion-input",7),e.NdJ("ngModelChange",function(r){return t.nativeMeanings[0].value=r}),e.qZA(),e.qZA(),e.YNc(22,p,2,2,"ion-item",8),e._UZ(23,"br"),e.TgZ(24,"ion-item",9),e.TgZ(25,"ion-button",10),e.NdJ("click",function(){return t.addNativeMeaning()}),e._UZ(26,"ion-icon",11),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(3),e.Oqu(t.isEdit?"Edit Vocable":"Add Vocable"),e.xp6(13),e.Q6J("ngModel",t.foreignMeaning),e.xp6(5),e.Q6J("ngModel",t.nativeMeanings[0].value),e.xp6(1),e.Q6J("ngForOf",t.nativeMeanings.slice(1)))},directives:[o.Gu,o.sr,o.wd,o.Sm,o.YG,o.W2,o.q_,o.Ie,o.Q$,o.pK,o.j9,u.JJ,u.On,d.sg,o.gu],styles:[".ios   body.dark[_nghost-%COMP%], .ios   body.dark   [_nghost-%COMP%]{--ion-item-background: #transparent}"]}),n})();var y=l(93),_=l(1018),M=l(3513),T=l(5853),A=l(8140);function C(n,s){if(1&n){const i=e.EpF();e.TgZ(0,"ion-item-sliding"),e.TgZ(1,"ion-item",2),e.NdJ("click",function(){const r=e.CHM(i).$implicit;return e.oxw().editVocable(r)}),e.TgZ(2,"ion-label"),e.TgZ(3,"h2"),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"ion-item-options",13),e.TgZ(8,"ion-item-option",14),e.NdJ("click",function(){const r=e.CHM(i).$implicit;return e.oxw().deleteVocable(r)}),e._UZ(9,"ion-icon",15),e._uU(10,"Delete "),e.qZA(),e.qZA(),e.qZA()}if(2&n){const i=s.$implicit;e.xp6(4),e.Oqu(i.foreignMeaning),e.xp6(2),e.Oqu(i.nativeMeanings.join(", "))}}const V=[{path:"",component:(()=>{class n{constructor(i,t,a,r){this.vocabularyService=i,this.eventBus=t,this.modalController=a,this.themeService=r,this.searchQuery="",this.vocabulary=[],this.canLoadMore=!1,this.offset=0,this.eventBus.on(y.q.ID).subscribe(()=>(0,c.mG)(this,void 0,void 0,function*(){this.offset=0,this.vocabulary=[],yield this.loadVocabulary()})),this.eventBus.on(M.x.ID).subscribe(()=>(0,c.mG)(this,void 0,void 0,function*(){this.offset=0,this.vocabulary=[],yield this.loadVocabulary()})),this.eventBus.on(_.M.ID).subscribe(()=>(0,c.mG)(this,void 0,void 0,function*(){this.offset=0,this.vocabulary=[],yield this.loadVocabulary()}))}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){yield this.loadVocabulary()})}ionViewWillEnter(){return(0,c.mG)(this,void 0,void 0,function*(){this.themeService.overwriteStatusBarColor("#ffffff")})}search(i){return(0,c.mG)(this,void 0,void 0,function*(){console.log(i.detail.value),this.searchQuery=i.detail.value,this.searchQuery?(this.vocabulary=yield this.vocabularyService.search(this.searchQuery,n.BATCH_SIZE),this.canLoadMore=!1):(this.offset=0,this.vocabulary=[],yield this.loadVocabulary())})}loadMore(i){return(0,c.mG)(this,void 0,void 0,function*(){yield this.loadVocabulary(),i.target.complete()})}deleteVocable(i){return(0,c.mG)(this,void 0,void 0,function*(){yield this.vocabularyService.delete(i),this.vocabulary=this.vocabulary.filter(t=>t!=i)})}editVocable(i){return(0,c.mG)(this,void 0,void 0,function*(){this.openAddVocabularyComponent({vocable:i})})}addVocable(){return(0,c.mG)(this,void 0,void 0,function*(){this.openAddVocabularyComponent()})}openAddVocabularyComponent(i={}){return(0,c.mG)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:Z,swipeToClose:!0,presentingElement:document.querySelector("ion-router-outlet"),componentProps:i});t.onWillDismiss().then(a=>{this.themeService.overwriteStatusBarColor("#ffffff")}),this.themeService.overwriteStatusBarColor("#000000"),t.present()})}loadVocabulary(){return(0,c.mG)(this,void 0,void 0,function*(){var i=yield this.vocabularyService.load(this.offset,n.BATCH_SIZE);this.offset+=n.BATCH_SIZE,this.vocabulary=this.vocabulary.concat(i),this.canLoadMore=0!=i.length})}}return n.BATCH_SIZE=20,n.\u0275fac=function(i){return new(i||n)(e.Y36(m.c),e.Y36(T.F),e.Y36(o.IN),e.Y36(A.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["vocabulary-list-page"]],decls:19,vars:4,consts:[[3,"translucent"],["slot","end"],[3,"click"],["slot","icon-only","name","add"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"content"],["debounce","200",3,"ionChange"],[4,"ngFor","ngForOf"],["threshold","100px",3,"disabled","ionInfinite"],[2,"height","8px"],["loadingSpinner","bubbles","loadingText","Loading more..."],["side","end"],["color","danger",3,"click"],["slot","start","name","trash"]],template:function(i,t){1&i&&(e.TgZ(0,"ion-header",0),e.TgZ(1,"ion-toolbar"),e.TgZ(2,"ion-title"),e._uU(3,"Vocabulary"),e.qZA(),e.TgZ(4,"ion-buttons",1),e.TgZ(5,"ion-button",2),e.NdJ("click",function(){return t.addVocable()}),e._UZ(6,"ion-icon",3),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"ion-content",4),e.TgZ(8,"ion-header",5),e.TgZ(9,"ion-toolbar"),e.TgZ(10,"ion-title",6),e._uU(11,"Vocabulary"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",7),e.TgZ(13,"ion-searchbar",8),e.NdJ("ionChange",function(r){return t.search(r)}),e.qZA(),e.TgZ(14,"ion-list"),e.YNc(15,C,11,2,"ion-item-sliding",9),e.qZA(),e.TgZ(16,"ion-infinite-scroll",10),e.NdJ("ionInfinite",function(r){return t.loadMore(r)}),e._UZ(17,"ion-row",11),e._UZ(18,"ion-infinite-scroll-content",12),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("fullscreen",!0),e.xp6(8),e.Q6J("ngForOf",t.vocabulary),e.xp6(1),e.s9C("disabled",!t.canLoadMore))},directives:[o.Gu,o.sr,o.wd,o.Sm,o.YG,o.gu,o.W2,o.VI,o.j9,o.q_,d.sg,o.td,o.Ie,o.Q$,o.IK,o.u8,o.ju,o.Nd,o.MB],styles:[""]}),n})()}];let q=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[v.Bz.forChild(V)],v.Bz]}),n})(),S=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[o.Pc,d.ez,u.u5,q]]}),n})()}}]);